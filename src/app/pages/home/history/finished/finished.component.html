<div *ngIf="dataSource$ | async as dataSource; else loading">
	<table mat-table [dataSource]="dataTableSource">

		<ng-container matColumnDef="aluno">
			<th mat-header-cell *matHeaderCellDef>Aluno</th>
			<td 
				mat-cell 
				*matCellDef="let element" 
				(click)="goToStudentDetails(element.client.cpf)"
				class="link"
			>{{element.client.name}}</td>
		</ng-container>
		
		<ng-container matColumnDef="titulo">
			<th mat-header-cell *matHeaderCellDef>Livro</th>
			<td 
				mat-cell 
				*matCellDef="let element" 
				(click)="goToBookDetails(element.unit.book.title)" 
				class="link"
			>{{element.unit.book.title}}</td>
		</ng-container>
	
		<ng-container matColumnDef="emprestimo">
			<th class="col" mat-header-cell *matHeaderCellDef>Data do empréstimo</th>
			<td class="col" mat-cell *matCellDef="let element">{{element.startsAt | date}}</td>
		</ng-container>

		<ng-container matColumnDef="devolucao">
			<th class="col" mat-header-cell *matHeaderCellDef>Data da devolução</th>
			<td class="col" mat-cell *matCellDef="let element">{{element.endsAt | date}}</td>
		</ng-container>

		<ng-container matColumnDef="multa">
			<th class="col" mat-header-cell *matHeaderCellDef>Multa</th>
			<td class="col" mat-cell *matCellDef="let element">{{element | calcLoan}}</td>
		</ng-container>
		
		<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
		<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
	</table>
</div>

<ng-template class="container" #loading>
	<div class="loading-spinner">
		<mat-spinner></mat-spinner>
	</div>
</ng-template>

<!--
{id: 'c435701a-4949-4104-bd22-a53adf64b1b7', startsAt: '2022-09-03', endsAt: '2022-09-03', deadLine: '2022-09-08', unit: {…}, …}
client
: 
{id: 'dc7b56a7-b7ee-40b1-a7b7-c990b2ad2e39', name: 'Julieta Sousa Fernandes', cpf: '624.272.180-57', isProfessor: false, loan: 300, …}
configuration
: 
assessment
: 
20
startedAt
: 
"2022-08-18T00:34:34.256+00:00"
tolerance
: 
5
[[Prototype]]
: 
Object
deadLine
: 
"2022-09-08"
endsAt
: 
"2022-09-03"
id
: 
"c435701a-4949-4104-bd22-a53adf64b1b7"
startsAt
: 
"2022-09-03"
unit
: 
{ibsn: 450, book: {…}, client: {…}}
[[Prototype]]
: 
Object
-->
